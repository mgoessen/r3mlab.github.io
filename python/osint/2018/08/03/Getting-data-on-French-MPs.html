<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile" />
  <!--<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">-->
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />

  <title>
    
      Getting up-to-date data on French MPs &middot; rem/lab
    
  </title>

  <!--
-->

  <!-- CSS -->
  <link rel="stylesheet" href="/assets/css/main.css" />



  

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface" />

  <!-- Icons -->
<!--  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/favicon.png" />
<link rel="shortcut icon" href="/favicon.ico" />
-->

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml" />

  <!-- Additional head bits without overriding original head -->


  <!-- Code hightlighting stylesheet -->
  <link href="/assets/css/molokai.css" rel="stylesheet" />

</head>


  <body class="post">

    <div id="sidebar">
  <header>
    <div class="site-title" >
      <a href="/">
        
        <div class="back-arrow icon"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
  <path d="M0 0h24v24H0z" fill="none"/>
  <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
</svg></div>
        
        <!--rem/lab--><div class="glitch" data-text1="rem" data-text2="/lab">rem<br>/lab</div>
      </a>
    </div>

    <p class="lead"></p>
  </header>
  <nav id="sidebar-nav-links">
  
    <a class="home-link "
        href="/">home</a>
  
  

  

  


  
    
  

  
    
      <a class="page-link "
          href="/about.html">about</a>
    
  

  
    
  

  
    
  

  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  


  


  
    
  

  
    
  

  
    
      <a class="category-link "
          href="/category/deployment.html">deployment</a>
    
  

  
    
  

  

  
    
      <a class="category-link "
          href="/category/osint.html">osint</a>
    
  

  
    
      <a class="category-link "
          href="/category/python.html">python</a>
    
  

  
    
  

  
    
      <a class="category-link "
          href="/category/security.html">security</a>
    
  

  
    
  

  


  <!-- Optional additional links to insert in sidebar nav -->
</nav>


  

  <nav id="sidebar-icon-links">
  
    <a id="github-link"
       class="icon" title="Github Project" aria-label="Github Project"
       href="https://github.com/r3mlab/">
      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 28" height="24" width="28"><path d="M12 2c6.625 0 12 5.375 12 12 0 5.297-3.437 9.797-8.203 11.391-0.609 0.109-0.828-0.266-0.828-0.578 0-0.391 0.016-1.687 0.016-3.297 0-1.125-0.375-1.844-0.812-2.219 2.672-0.297 5.484-1.313 5.484-5.922 0-1.313-0.469-2.375-1.234-3.219 0.125-0.313 0.531-1.531-0.125-3.187-1-0.313-3.297 1.234-3.297 1.234-0.953-0.266-1.984-0.406-3-0.406s-2.047 0.141-3 0.406c0 0-2.297-1.547-3.297-1.234-0.656 1.656-0.25 2.875-0.125 3.187-0.766 0.844-1.234 1.906-1.234 3.219 0 4.594 2.797 5.625 5.469 5.922-0.344 0.313-0.656 0.844-0.766 1.609-0.688 0.313-2.438 0.844-3.484-1-0.656-1.141-1.844-1.234-1.844-1.234-1.172-0.016-0.078 0.734-0.078 0.734 0.781 0.359 1.328 1.75 1.328 1.75 0.703 2.141 4.047 1.422 4.047 1.422 0 1 0.016 1.937 0.016 2.234 0 0.313-0.219 0.688-0.828 0.578-4.766-1.594-8.203-6.094-8.203-11.391 0-6.625 5.375-12 12-12zM4.547 19.234c0.031-0.063-0.016-0.141-0.109-0.187-0.094-0.031-0.172-0.016-0.203 0.031-0.031 0.063 0.016 0.141 0.109 0.187 0.078 0.047 0.172 0.031 0.203-0.031zM5.031 19.766c0.063-0.047 0.047-0.156-0.031-0.25-0.078-0.078-0.187-0.109-0.25-0.047-0.063 0.047-0.047 0.156 0.031 0.25 0.078 0.078 0.187 0.109 0.25 0.047zM5.5 20.469c0.078-0.063 0.078-0.187 0-0.297-0.063-0.109-0.187-0.156-0.266-0.094-0.078 0.047-0.078 0.172 0 0.281s0.203 0.156 0.266 0.109zM6.156 21.125c0.063-0.063 0.031-0.203-0.063-0.297-0.109-0.109-0.25-0.125-0.313-0.047-0.078 0.063-0.047 0.203 0.063 0.297 0.109 0.109 0.25 0.125 0.313 0.047zM7.047 21.516c0.031-0.094-0.063-0.203-0.203-0.25-0.125-0.031-0.266 0.016-0.297 0.109s0.063 0.203 0.203 0.234c0.125 0.047 0.266 0 0.297-0.094zM8.031 21.594c0-0.109-0.125-0.187-0.266-0.172-0.141 0-0.25 0.078-0.25 0.172 0 0.109 0.109 0.187 0.266 0.172 0.141 0 0.25-0.078 0.25-0.172zM8.937 21.438c-0.016-0.094-0.141-0.156-0.281-0.141-0.141 0.031-0.234 0.125-0.219 0.234 0.016 0.094 0.141 0.156 0.281 0.125s0.234-0.125 0.219-0.219z"></path>
</svg>

    </a>
<!--    <a id="github-download-link"
       class="icon" title="Download" aria-label="Download"
       href="https://github.com/r3mlab//archive/v.zip">
      <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg> -->
    </a>
  

  <a id="subscribe-link"
     class="icon" title="Subscribe" aria-label="Subscribe"
     href="/feed.xml">
    <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <circle cx="6.18" cy="17.82" r="2.18"/>
    <path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/>
</svg>
  </a>

  
  
  
  

  
    <a id="tags-link"
       class="icon"
       title="Tags" aria-label="Tags"
       href="/tags.html">
      <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"/>
</svg>
    </a>
  

  
    <a id="search-link"
       class="icon"
       title="Search" aria-label="Search"
       href="/search.html">
      <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>
    </a>
  

  <!-- Optional additional links to insert for icons links -->
</nav>

  <!--
<p>
  &copy; 2018.
  <a href="/LICENSE.md">MIT License.</a>
</p>-->

</div>


    <main class="container">
      <div class="content">
  <header>
    <h1 class="post-title">Getting up-to-date data on French MPs</h1>
  </header>
  <div class="post-meta">
  <span class="post-date">03 Aug 2018</span>
  <span class="post-categories">
    
      &bull;

      
      
      

      
        <a href="/category/python.html">
          python
        </a>
      
    
      &bull;

      
      
      

      
        <a href="/category/osint.html">
          osint
        </a>
      
    
  </span>
</div>


  <div class="post-body">
    <p>Say we need to quickly get up-to-date data on French MPs for a project.</p>

<p>Everything we need is on the National Assembly or on the Senate websites, but they provide no structured way to get the data.
Fortunately, Regards Citoyens provides up-to-date data on both French Parliament houses in multiple formats, through several websites:</p>
<ul>
  <li><a href="https://nosdeputes.fr">nosdeputes.fr</a>: info on lower-house MPs</li>
  <li><a href="https://nossenateurs.fr">nosenateurs.fr</a>: info on upper-house MPs</li>
  <li><a href="https://www.parlapi.fr/">ParlAPI</a>: API access to data on both houses</li>
</ul>

<h2 id="info-on-current-lower-house-mps">Info on current lower-house MPs</h2>

<p>For example, if we need information on all lower-house MPs currently in office, we get the corresponding JSON data from nosdeputes.fr :</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">url</span> <span class="o">=</span><span class="s">'https://www.nosdeputes.fr/deputes/enmandat/json'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="n">jsonData</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span></code></pre></figure>

<p>We can then iterate over the 577 lower-house MPs to get the info we want.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">576</span><span class="p">):</span>
	  <span class="n">d</span> <span class="o">=</span> <span class="n">jsonData</span><span class="p">[</span><span class="s">'deputes'</span><span class="p">][</span><span class="n">num</span><span class="p">][</span><span class="s">'depute'</span><span class="p">]</span> <span class="c"># easier to read</span>
    <span class="c"># rest of the code</span></code></pre></figure>

<p>Inside this <code class="highlighter-rouge">for</code> loop, we can now access data on MPs to store it in the format we like (CSV or Excel table, python dictionary, etc.). For example, we access the surname of the MP with <code class="highlighter-rouge">d['nom']</code>. Have a look at the JSON data in your web browser to find all the available attributes.</p>

<p>Some attributes have multiple values, such as email addresses: many MPs have more than one registered. We can store them in a list, like so:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python">	<span class="n">mails</span> <span class="o">=</span> <span class="p">[]</span>
	<span class="k">for</span> <span class="n">dic</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="s">'emails'</span><span class="p">]:</span>
		<span class="n">newEmail</span> <span class="o">=</span> <span class="n">dic</span><span class="p">[</span><span class="s">'email'</span><span class="p">]</span>
		<span class="n">mails</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newEmail</span><span class="p">)</span></code></pre></figure>

<h2 id="example-fetching-all-email-addresses">Example: fetching all email addresses</h2>

<p>Putting all this together, we can write a little script that outputs all the email addresses of current lower-house MPs:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">url</span> <span class="o">=</span><span class="s">'https://www.nosdeputes.fr/deputes/enmandat/json'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="n">jsonData</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

<span class="n">allEmails</span> <span class="o">=</span> <span class="p">[]</span> <span class="c"># We'll store everything in here</span>

<span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">576</span><span class="p">):</span>
	  <span class="n">d</span> <span class="o">=</span> <span class="n">jsonData</span><span class="p">[</span><span class="s">'deputes'</span><span class="p">][</span><span class="n">num</span><span class="p">][</span><span class="s">'depute'</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">dic</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="s">'emails'</span><span class="p">]:</span>
  	    <span class="n">newEmail</span> <span class="o">=</span> <span class="n">dic</span><span class="p">[</span><span class="s">'email'</span><span class="p">]</span>
  		  <span class="n">allEmails</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newEmail</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allEmails</span><span class="p">))</span></code></pre></figure>


    



<div class="post-tags">
  
    
    <a href="/tags.html#python3">
    
      <span class="icon">
        <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"/>
</svg>
      </span>&nbsp;<span class="tag-name">python3</span>
    </a>
  
    
    <a href="/tags.html#osint">
    
      <span class="icon">
        <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"/>
</svg>
      </span>&nbsp;<span class="tag-name">OSINT</span>
    </a>
  
    
    <a href="/tags.html#france">
    
      <span class="icon">
        <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"/>
</svg>
      </span>&nbsp;<span class="tag-name">France</span>
    </a>
  
    
    <a href="/tags.html#parliament">
    
      <span class="icon">
        <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"/>
</svg>
      </span>&nbsp;<span class="tag-name">Parliament</span>
    </a>
  
    
    <a href="/tags.html#api">
    
      <span class="icon">
        <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"/>
</svg>
      </span>&nbsp;<span class="tag-name">API</span>
    </a>
  
</div>
  </div>

  <!--

  <section class="comments">
    <h2>Comments</h2>
    
  <p>
    You are seeing this because your Disqus shortname is not properly set. To
    configure Disqus, you should edit your <code>_config.yml</code> to include
    either a <code>disqus.shortname</code> variable.
  </p>

  <p>
    If you do not wish to use Disqus, override the
    <code>comments.html</code> partial for this theme.
  </p>


  </section>

-->

  <!--<section class="related">
  <h2>Related Posts</h2>
  <ul class="posts-list">
    
      <li>
        <h3>
          <a href="/python/osint/2018/08/09/PDF-text-extraction.html">
            PDF text extraction
            <small>09 Aug 2018</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/python/2018/07/31/Python-VCF-contacts-writer.html">
            Simple vCard writer (+CSV conversion)
            <small>31 Jul 2018</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/python/2018/07/30/PostgreSQL-Basics.html">
            PostgreSQL Basics
            <small>30 Jul 2018</small>
          </a>
        </h3>
      </li>
    
  </ul>
</section>
-->
</div>

    </main>

    <!-- Optional footer content -->

  </body>
</html>
